<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>I Live for Fractures — George Karin</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --black:#09060f; --deep:#1a0a2e; --mid:#3d1f6e;
  --bright:#8b5cf6; --glow:#a855f7; --light:#c4b5fd;
  --text:#e2d9f3; --dim:#9d8bc4;
}
html,body {
  height:100%; background:var(--black); color:var(--text);
  font-family:'DM Sans',sans-serif;
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}
#canvas { position:fixed; inset:0; width:100%; height:100%; pointer-events:none; z-index:0; }
.orb {
  position:fixed; border-radius:50%; filter:blur(80px);
  pointer-events:none; z-index:0;
  animation:floatOrb 9s ease-in-out infinite;
}
@keyframes floatOrb { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-28px)} }
@keyframes fadeUp { from{opacity:0;transform:translateY(28px)} to{opacity:1;transform:translateY(0)} }
@keyframes pulseBolt { 0%,100%{opacity:0.75;transform:scale(1)} 50%{opacity:1;transform:scale(1.05)} }

.player {
position:relative; z-index:10; width:360px;
background:linear-gradient(150deg,rgba(26,10,46,0.97),rgba(9,6,15,0.99));
border:1px solid rgba(139,92,246,0.22); border-radius:24px;
padding:28px 24px 24px;
box-shadow:0 0 60px rgba(139,92,246,0.13),0 24px 60px rgba(0,0,0,0.75);
animation:fadeUp 0.9s ease forwards;
}
.album-art {
width:100%; aspect-ratio:1; border-radius:16px;
background:linear-gradient(135deg,#1a0a2e,#2d1254,#1a0a2e);
display:flex; align-items:center; justify-content:center;
position:relative; overflow:hidden; margin-bottom:22px;
box-shadow:0 8px 32px rgba(139,92,246,0.28);
}
.album-art .bg-r {
position:absolute; inset:0;
background:radial-gradient(circle at 30% 30%,rgba(168,85,247,0.28),transparent 60%),
radial-gradient(circle at 70% 70%,rgba(109,40,217,0.18),transparent 50%);
}
.bolt-svg {
width:65%; height:65%; position:relative; z-index:1;
animation:pulseBolt 3s ease-in-out infinite;
transition: filter 0.4s ease;
}
.song-title {
font-family:‘Playfair Display’,serif; font-size:21px; font-weight:700;
background:linear-gradient(90deg,#e2d9f3,#c4b5fd);
-webkit-background-clip:text; -webkit-text-fill-color:transparent;
margin-bottom:3px;
}
.song-artist { font-size:12.5px; color:var(–dim); letter-spacing:.5px; margin-bottom:18px; }

.lyr-wrap {
height:210px; overflow-y:scroll; scroll-behavior:smooth;
scrollbar-width:none; margin-bottom:18px;
-webkit-mask-image:linear-gradient(to bottom,transparent,black 18%,black 82%,transparent);
mask-image:linear-gradient(to bottom,transparent,black 18%,black 82%,transparent);
}
.lyr-wrap::-webkit-scrollbar { display:none; }
.lyr-inner { padding:80px 0; }

.ll {
text-align:center; padding:5px 12px; border-radius:8px;
cursor:pointer; transition:all .55s ease;
}
.ll span {
font-size:14px; font-weight:300; color:rgba(157,139,196,0.38);
display:block; line-height:1.55; transition:all .55s ease;
}
.ll.lbl span { font-size:10px; text-transform:uppercase; letter-spacing:2.5px; font-weight:500; color:rgba(139,92,246,0.45); padding-top:10px; }
.ll.active { background:rgba(139,92,246,0.09); }
.ll.active span { font-size:16px; font-weight:500; color:#fff; text-shadow:0 0 22px rgba(168,85,247,0.55); }
.ll.near span { font-size:14.5px; color:rgba(196,181,253,0.65); }

.time-row { display:flex; justify-content:space-between; font-size:11px; color:var(–dim); margin-bottom:7px; }
.prog-bar { width:100%; height:3px; background:rgba(139,92,246,0.18); border-radius:10px; cursor:pointer; position:relative; }
.prog-fill { height:100%; background:linear-gradient(90deg,#4c1d95,#8b5cf6); border-radius:10px; width:0%; position:relative; transition:width .1s linear; }
.prog-dot {
position:absolute; right:-5px; top:50%; transform:translateY(-50%);
width:11px; height:11px; background:#fff; border-radius:50%;
box-shadow:0 0 8px rgba(168,85,247,.9); opacity:0; transition:opacity .2s;
}
.prog-bar:hover .prog-dot { opacity:1; }

.controls { display:flex; align-items:center; justify-content:center; gap:22px; margin-top:14px; }
.ctrl { background:none; border:none; cursor:pointer; color:var(–dim); padding:8px; border-radius:50%; display:flex; transition:color .2s; }
.ctrl:hover { color:var(–text); }
.ctrl.play {
width:52px; height:52px;
background:linear-gradient(135deg,#7c3aed,#a855f7); color:#fff;
box-shadow:0 4px 22px rgba(139,92,246,.45); transition:transform .15s,box-shadow .15s;
}
.ctrl.play:hover { transform:scale(1.07); box-shadow:0 6px 30px rgba(139,92,246,.65); }
.ctrl.play:active { transform:scale(0.97); }

.viz {
display:flex; align-items:flex-end; justify-content:center; gap:3px;
height:22px; margin-top:14px; opacity:0; transition:opacity .5s;
}
.viz.on { opacity:1; }
.vbar { width:3px; background:linear-gradient(to top,#4c1d95,#8b5cf6); border-radius:2px; height:4px; transition:height .08s ease; }

.error-msg {
position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
background:rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.3);
color:#fca5a5; padding:10px 20px; border-radius:10px; font-size:13px;
display:none; z-index:100; text-align:center; max-width:320px;
}
</style>

</head>
<body>

<canvas id="canvas"></canvas>

<div class="orb" style="width:480px;height:480px;top:-130px;right:-80px;background:#3d1f6e;opacity:.22;animation-delay:0s"></div>
<div class="orb" style="width:320px;height:320px;bottom:-80px;left:-60px;background:#4c1d95;opacity:.22;animation-delay:-3s"></div>
<div class="orb" style="width:200px;height:200px;top:45%;left:50%;margin:-100px 0 0 -100px;background:#a855f7;opacity:.10;animation-delay:-5s"></div>

<div class="player">
  <div class="album-art">
    <div class="bg-r"></div>
    <svg class="bolt-svg" id="boltSvg" viewBox="0 0 200 200" fill="none">
      <defs>
        <linearGradient id="bg" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#e9d5ff"/>
          <stop offset="60%" stop-color="#a855f7"/>
          <stop offset="100%" stop-color="#6d28d9"/>
        </linearGradient>
      </defs>
      <polygon points="110,15 78,95 100,95 70,185 142,80 118,80 150,15" fill="url(#bg)" opacity=".95"/>
      <polygon points="110,15 78,95 100,95 70,185 142,80 118,80 150,15" fill="none" stroke="rgba(221,214,254,0.3)" stroke-width="1"/>
    </svg>
  </div>

  <div class="song-title">I Live for Fractures</div>
  <div class="song-artist">George Karin</div>

  <div class="lyr-wrap" id="lyrWrap">
    <div class="lyr-inner" id="lyrInner"></div>
  </div>

  <div style="margin-bottom:14px">
    <div class="time-row"><span id="curTime">0:00</span><span id="totTime">3:50</span></div>
    <div class="prog-bar" id="progBar">
      <div class="prog-fill" id="progFill"><div class="prog-dot"></div></div>
    </div>
  </div>

  <div class="controls">
    <button class="ctrl" id="prevBtn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
    </button>
    <button class="ctrl play" id="playBtn">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" id="playIcon"><path d="M8 5v14l11-7z"/></svg>
    </button>
    <button class="ctrl" id="nextBtn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zm2-8.14 5.43 3.86L8 15.86V9.86zM16 6h2v12h-2z"/></svg>
    </button>
  </div>

  <div class="viz" id="viz"></div>
</div>

<div class="error-msg" id="errMsg">
  ⚠️ Не удалось загрузить MP3.<br>Убедись что файл <b>I_live_for_Fractures.mp3</b><br>лежит в той же папке что и этот HTML.
</div>

<!-- MP3 должен лежать рядом с этим HTML файлом -->

<audio id="audio" preload="auto"></audio>

<script>
const audio = document.getElementById('audio');
const errMsg = document.getElementById('errMsg');

// Try filenames in order
const filenames = ['I live for Fractures.mp3', 'I_live_for_Fractures.mp3', 'song.mp3', 'fractures.mp3'];
let tryIdx = 0;
let loaded = false;

function tryLoad() {
  if (tryIdx >= filenames.length) { errMsg.style.display = 'block'; return; }
  audio.src = filenames[tryIdx];
  audio.load();
}
audio.addEventListener('error', () => { if (!loaded) { tryIdx++; tryLoad(); } });
audio.addEventListener('canplay', () => { loaded = true; errMsg.style.display = 'none'; });
tryLoad();

const LYRICS = [
  { t:0,   text:"Chorus",                                   lbl:true },
  { t:4,   text:"I live for Fractures" },
  { t:9,   text:"I live for Fractures" },
  { t:14,  text:"I live for Fractures" },
  { t:20,  text:"Verse",                                    lbl:true },
  { t:22,  text:"Shirt and jeans, number one" },
  { t:27,  text:"But it's feeling so fun" },
  { t:32,  text:"I like to play the show" },
  { t:36,  text:"and I don't care" },
  { t:40,  text:"How I look, 'cause I'm in the role" },
  { t:47,  text:"Chorus",                                   lbl:true },
  { t:49,  text:"I live for Fractures" },
  { t:54,  text:"I live for Fractures" },
  { t:59,  text:"I live for Fractures" },
  { t:65,  text:"Bridge",                                   lbl:true },
  { t:67,  text:"Take me in your fractures" },
  { t:73,  text:"Take me in your fractures" },
  { t:80,  text:"Outro",                                    lbl:true },
  { t:83,  text:"Take me in your fractures" },
  { t:88,  text:"I know your pain" },
  { t:93,  text:"Take me in your game" },
  { t:98,  text:"'Cause I want the fame, fame, fame, fame" },
  { t:104, text:"Now I want more" },
  { t:109, text:"It needs me more" },
  { t:114, text:"Now I want more" },
  { t:120, text:"Bridge",                                   lbl:true },
  { t:123, text:"Take me in your fractures" },
  { t:129, text:"Take me in your fractures" },
];

// Build lyrics DOM
const lyrInner = document.getElementById('lyrInner');
const lineEls = [];
LYRICS.forEach(l => {
  const div = document.createElement('div');
  div.className = 'll' + (l.lbl ? ' lbl' : '');
  div.innerHTML = `<span>${l.text}</span>`;
  if (!l.lbl) div.addEventListener('click', () => { audio.currentTime = l.t; });
  lyrInner.appendChild(div);
  lineEls.push(div);
});

// Visualizer bars
const viz = document.getElementById('viz');
const barEls = [];
for (let i = 0; i < 26; i++) {
  const b = document.createElement('div');
  b.className = 'vbar';
  viz.appendChild(b);
  barEls.push(b);
}
let vizRaf;
function animViz() {
  barEls.forEach(b => {
    const cur = parseFloat(b.style.height) || 4;
    const target = Math.random() * 17 + 3;
    b.style.height = (cur + (target - cur) * 0.18) + 'px';
  });
  vizRaf = requestAnimationFrame(animViz);
}
function stopViz() {
  cancelAnimationFrame(vizRaf);
  barEls.forEach(b => b.style.height = '4px');
}

// Particles
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
resize(); window.addEventListener('resize', resize);

const pts = Array.from({length:100}, () => ({
  x:Math.random()*innerWidth, y:Math.random()*innerHeight,
  r:Math.random()*1.8+0.3, vy:-(Math.random()*.35+.08),
  vx:(Math.random()-.5)*.2, op:Math.random()*.55+.1,
  tw:Math.random()*Math.PI*2, tws:Math.random()*.025+.005,
  pur:Math.random()>.5,
}));
(function tick() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  pts.forEach(p => {
    p.x+=p.vx; p.y+=p.vy; p.tw+=p.tws;
    if(p.y<-5){p.y=canvas.height+5;p.x=Math.random()*canvas.width;}
    const a=p.op*(0.65+0.35*Math.sin(p.tw));
    ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle=p.pur?`rgba(139,92,246,${a})`:`rgba(196,181,253,${a})`; ctx.fill();
    if(p.r>1.2){
      const g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3);
      g.addColorStop(0,p.pur?`rgba(168,85,247,${a*.4})`:`rgba(221,214,254,${a*.3})`);
      g.addColorStop(1,'transparent');
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r*3,0,Math.PI*2);
      ctx.fillStyle=g; ctx.fill();
    }
  });
  requestAnimationFrame(tick);
})();

// Lyric sync
let lastActive = -1;
function updateLyrics(t) {
  let active = -1;
  for (let i = LYRICS.length-1; i >= 0; i--) {
    if (t >= LYRICS[i].t) { active = i; break; }
  }
  if (active === lastActive) return;
  lastActive = active;
  lineEls.forEach((el, i) => {
    el.classList.remove('active','near');
    if (i === active) el.classList.add('active');
    else if (Math.abs(i-active)===1) el.classList.add('near');
  });
  if (active >= 0) {
    const wrap = document.getElementById('lyrWrap');
    const el = lineEls[active];
    wrap.scrollTo({ top: el.offsetTop - wrap.clientHeight/2 + el.offsetHeight/2, behavior:'smooth' });
  }
}

function fmt(s) { return `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`; }

audio.addEventListener('timeupdate', () => {
  const t = audio.currentTime, dur = audio.duration || 229.99;
  document.getElementById('progFill').style.width = (t/dur*100)+'%';
  document.getElementById('curTime').textContent = fmt(t);
  updateLyrics(t);
});
audio.addEventListener('loadedmetadata', () => {
  document.getElementById('totTime').textContent = fmt(audio.duration);
});

// Play / pause
const playBtn = document.getElementById('playBtn');
const playIcon = document.getElementById('playIcon');
const boltSvg = document.getElementById('boltSvg');

function setPlaying(on) {
  if (on) {
    audio.play().catch(() => { errMsg.style.display = 'block'; });
    playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
    viz.classList.add('on');
    boltSvg.style.filter = 'drop-shadow(0 0 18px rgba(168,85,247,0.85))';
    animViz();
  } else {
    audio.pause();
    playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
    viz.classList.remove('on');
    boltSvg.style.filter = '';
    stopViz();
  }
}

playBtn.addEventListener('click', () => setPlaying(audio.paused));
audio.addEventListener('ended', () => setPlaying(false));

document.getElementById('progBar').addEventListener('click', e => {
  const r = e.currentTarget.getBoundingClientRect();
  audio.currentTime = Math.max(0, Math.min(1,(e.clientX-r.left)/r.width)) * (audio.duration||229.99);
});
document.getElementById('prevBtn').addEventListener('click', () => { audio.currentTime = 0; });
document.getElementById('nextBtn').addEventListener('click', () => { audio.currentTime = audio.duration||229.99; });

updateLyrics(0);
</script>

</body>
</html>
